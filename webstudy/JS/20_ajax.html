<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <!-- [ajax]
    - 회원가입시 기존에 있는 아이디나 비밀번호를 경고하는 문구를 생성시 사용
    -->
    <script>
        /*
            AJAX
            - asynchronous javascript and xml
            - 자바스크립트와 xml간 '비동기 통신'
            - mvc와 ajax코드를 구분할것?
            - '통신'방식                            & 통신에 대해 잘 알필요는 없음, 대략적인개념
                1) 동기 통신
                    (1) 순서대로 통신
                    (2) 요청을 하고, 응답이 올 때까지 기다림
                2) 비동기 통신
                    (1) 순서를 지키지 않는 통신
                    (2) 응답이 오지 않더라도 요청을 계속
                    (3) 응답이 오면 해당 응답만을 처리하면 됨

                    & ajax는 비동기 통신이다
            - 페이지 전체를 로드하지 않고, 페이지 일부만 요청해서 처리하는 기능
            // (ex 댓글을 추가하면, 창이 새로 로드되는 경우가 아닌, 바로 같은 사이트 내에서 댓글이 추가됨 )
            - 자바스크립트 'XMLHttpRequest' 객체가 AJAX 처리를 담당(XHR이라 줄여부름)
        */
    </script>

    <div id="box1"></div>

    <script>

        // # data.txt 파일(임의의 서버 경로)이 서버가 보낸 데이터
        
        // 1. XMLHttpRequest 객체 생성
        var xhr = new XMLHttpRequest();

        // 2. open() : 요청정보를 만들기
        // open(HTTP메서드, 요청서버경로, 통신방식)
        //  1) HTTP메서드
        //      (1) GET 방식(기본)
        //      (2) POST 방식
        //  2) 요청서버경로
        //      (1) URLMapping
        //  3) 통신방식
        //      (1) 동기 통신 : false
        //      (2) 비동기 통신 : true
        xhr.open('GET', 'data.txt', true);

        // 3. send() : 요청하기
        xhr.send();
        // & 문법 외울필요없음

        // 4. 응답 처리
        //  - 응답이 오는지 점검하기 위한 readystatechange 이벤트가 필요
        xhr.onreadystatechange = function(event) {

            // 1) 응답에 관련된 속성
            // (1) readyState : 통신확인
            //     0 : opended / 1 : unsend / 2 : headers_receive / 3 : loading(띄우는중) / 4 : done(다됨)
            // & 4면 제대로 된거, 아니면 제대로 안될걸로 기억할것
            // (2) status   : 응답코드
            //     200 : 성공 / 40x : 요청실패(클라이언드측) / 50x : 서버 오류(서버측) 
        if(xhr.readyState == 4 && xhr.status == 200) {

            // 응답 데이터 속성
            // 1) 텍스트 형태       : responseText
            // 2) XML 형식 응답     : responseXML
            // 3) JSON 형식 응답    : JSON.parse(responseText)(서버측에서 보내는 JSON 데이터는 문자열(텍스트) 형식으로 온다) 
            document.getElementById('box1').textContent = xhr.responseText;
        }

            // & 고대유물같은 코드니 외울필요는 없음, 이해만 할것
        }


    </script>


    
</body>
</html>