<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <!-- * 제이쿼리 라이브러리를 호출해야만 제이쿼리를 사용할 수 있다 -->
    <script src="jquery-3.6.1.min.js"></script>

    <!-- [jquery_ajax, 외우기] 
    - 목적 : 자바스크립트로 서버에서 데이터 받아오기
    -->

    <div id="box1">
        <button id="btn1">클릭</button>
    </div>
    <script>
        $('#btn1').on('click', function(event) {
            $.ajax({
                'type' : 'GET',                 // 요청메서드
                'url' : 'data.txt',             // 파일경로
                'async' : true,                 // 비동기 통신(디폴트), & 동기통신 쓸일없으니 true만 쓰기
                'dataType' : 'text',            // 응답 데이터 타입(text, xml, json)
                'success' : function(data) {    // 매개변수 data로 응답 데이터가 전달됨(responstText, responseXML)
                    $('#box1').append($('<div>').text(data));
                },
                'error' : function(jqXHR, textStatus, errorThrown) {                             // 통신실패
                    console.log('status', jqXHR.status);                // 응답코드(404)
                    console.log('statusText', jqXHR);                   // 응답텍스트(not found)
                    console.log('responseText', jqXHR.responseText);    // 응답텍스트(서버측에서 전송한 예외메시지)

                    // & async, error 생략 가능
                    
                    //xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                    // console.log(textStatus);        // error
                    // console.log(errorThrown);       // not found
                    // & textstatus와 errorthrown은 중요하지않음
                    //xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                    
                } 
            })
        });
    </script>

    
<!-- books2 태그의 텍스트를 테이블에 넣기 -->

</head>
<body>
    <div id="box2">
        <button id="btn2">버튼</button>
            <table border="1">
                <thead>
                    <tr>
                        <td>제목</td>
                        <td>저장</td>
                        <td>가격</td>
                    </tr>
                </thead>
                <tbody class="book_list">
                  
                </tbody>
            </table>
    </div>
    <script>
        $('#btn2').on('click', function(event) {
            $.ajax({
                'type': 'GET',
                'url' : 'books1.xml',
                dataType : 'xml',
                'success' : function(data) {                         // data <- xhr.responseXML
                // 자식태그 가져오기 find
                // console.log($(data).find('book'));                // book 3개를 가지고 온 배열

                // 반복문 each
                $.each($(data).find('book'), function(i, book) {     //  
                    var tr = '<tr>';
                    // tr += '<td>' + $(book).find('title').text() + '</td>';
                    // tr += '<td>' + $(book).find('author').text() + '</td>';
                    // tr += '<td>' + $(book).find('price').text() + '</td>';
                    // tr += '</tr>';
                    // console.log(i, book);
                    // $('#box2 .book_list').append(tr)                  // book_list

                    var tr = $('<tr>');
                    tr.append($('<td>').text($(book).find('title').text()))
                    tr.append($('<td>').text($(book).find('author').text()))
                    tr.append($('<td>').text($(book).find('price').text()))
                        // tr에 td태그를 추가, td 태그의 텍스트로 book의 자식태그 title의 텍스트로 추가 
                    // $('#box2 .book_list').append(tr);
                    $(tr).appendTo('#box2 .book_list');
                    });

                    
                }
            });
        })
    </script>

    <!-- books2 속성을 테이블에 넣기 -->
    <div id="box3">
        <button id="btn3">버튼</button>
            <table border="1">
                <thead>
                    <tr>
                        <td>제목</td>
                        <td>저장</td>
                        <td>가격</td>
                    </tr>
                </thead>
                <tbody class="book_list">
                
                </tbody>
            </table>
    </div>
    <script>
        $('#btn3').on('click', function(event) {
            $.ajax({
                'type' : 'GET',
                'url' : 'books2.xml',
                dataType : 'xml',
                'success' : function(data) {
                    $.each($(data).find('book'), function(i, book) {
                        var tr = $('<tr>');
                        tr.append($('<td>').text($(book).attr('title')));
                        tr.append($('<td>').text($(book).attr('author')));
                        tr.append($('<td>').text($(book).attr('price')));
                        $('#box3 .book_list').append(tr);
                    });
                }
            });
        });

    </script>

<!-- 
4. xml 읽기연습 - sfc_web_map.xml
<div><button id="btn5">클릭</button></div>
<div id="box5">
    <table border="1">
        <thead>
            <tr>
                <td>지역명</td>
                <td>날씨</td>
                <td>온도</td>
            </tr>
        </thead>
        <tbody id="weather"></tbody>
    </table>
</div>
<script>

</script> -->





    <!-- 6. json 읽기 
    - json.parse를 사용하지 않아도 된다
    -->
    <div><button id="btn6">클릭</button></div>
    <div id="box6">
        <table border="1">
            <thead>
                <tr>
                    <td>제목</td>
                    <td>저장</td>
                    <td>가격</td>
                    <!-- <td>가나</td> -->
                </tr>
            </thead>
            <tbody class="book_list">
              
            </tbody>
        </table>
    </div>
    <script>
        $('#btn6').on('click', function(event) {
            $.ajax({
                'type' : 'get',
                'url' : 'books.json',
                dataType : 'json',
                'success' : function(data) {   
                    // console.log(data);   // 배열
                    $.each(data, function(i, book) {
                        // console.log(book);   // 객체
                        var tr = $('<tr>');
                        // tr.append($('<td>').text(book.title));
                        // tr.append($('<td>').text(book.author));
                        // tr.append($('<td>').text(book.price));
                        // tr.appendTo('#box6 book_list');
                        for(let prop in book) {
                            tr.append($('<td>').text(book[prop]));
                                // forin문에서는 []사용
                        }
                    })
                    
                }
            })
        })
    </script>

    <a href="111.png"></a>


    
</body>
</html>