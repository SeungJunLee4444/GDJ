<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
        /* [정규식]
            - 특정 문자열에서 원하는 패턴이 있는지 판단하기 위한 표현식
            - ex) 아이디, 이메일, 비밀번호 확인에 사용
            - js에서 정규식 선언
                var regExp = /정규식/;
            - 정규식 점검 메서드(* 둘중 하나만 알면 됨,  2번을 추천)
                1) '문자열'.match(정규식)
                    (1) null 반환       : 원하는 패턴 없음
                    (2) not null 반환   : 원하는 패턴 있음
                    // & 문자열 메서드 match로 null 여부를 통해 패턴 확인
                2) 정규식.text('문자열')
                    (1) false 반환  : 원하는 패턴 없음
                    (2) true 반환   : 원하는 패턴 있음
            - 정규식 메타 문자
                1) a     : 문자 a를 의미
                2) a|b   : a 또는 b
                3) ^a    : a로 시작
                4) a$    : a로 끝남
                5) a*    : a를 0개이상 포함(없어도됨)
                6) a+    : a를 1개이상 포함(있어야함
                7) a{n}  : 문자 a를 n개 포함함
                8) a{n,} : 문자 a를 n개 이상 포함함
                9) a{n,m}: 문자 a를 n개 이상 m개 이하 포함함
               10) .     : 모든 문자를 의미함 

               & 메타문자에 쓰이는 기호들은 단독으로 쓰면 문자로 인식되지 않기 떄문에
               []안에 써야 특수기호로서 인식될 수 있다

            - 정규식 문자 클래스
                1) [a]  : 문자 a를 의미
                2) [.]  : 문자 .를 의미함(모든문자x)
                ex) 이메일의 . @ 등 꼭 들어가야할 부분에서 사용
                . 외에도 $, ^, *, + 등 그냥쓰면 메타문자로 인식되는 경우에,
                []를 써서 특수문자로 인식하도록 만듬
                3) ^[a] : 문자 a로 시작
                4) [a]$ : 문자 a로 끝남
                5) [a$] : 문자 a$
                6) [^a] : 문자 a를 제외함(*)
                7) [ab] : 문자 a 또는 b
                & 문자 클래스 안에서는 문자가 두개 이상 들어가면 '또는' 이다
                8) [0-9]: 숫자를 의미함
                9) [a-z]: 소문자를 의미
               10) [A-Z]: 대문자를 의미
               11) [가-힣]: 한글을 의미함
               12) [0-9a-z]: 숫자 또는 소문자  
               
            - 정규식 이스케이스
                1) \d   : 숫자를 의미(digit, [0-9] 와 동일)
                2) \D   : 숫자가 아님
                3) \w   : 문자를 의미함(word)[0-9a-zA-Z_](_포함) & 숫자 + 문자(알파벳)
                4) \W   ; 문자가 아님(3번이 아님)
                5) \s   : 공백문자를 의미(space bar)
                6) \S   : 공백문자가 아님
                7) \.   : 문자 .를 의미
        */
        
        // ex)
        // 011-111-1111
        // 010-1111-1111
        // ^[0-9]{3}-[0-9]{3,4}-[0-9]{4}$
        // ^\d{3}-\d{3,4}-\d{4}$

        // (1) 숫자와 문자 대입
        // (2) 숫자로 시작하고 숫자로 끝나는 시작점, 마침점 정하기

    </script>

    

    <!-- 1. 핸드폰 번호 검사 -->
    <div>
        <input type="text" id="tel">
        <!-- input 한 value의 값이 this 객체 -->
        <span id="msg_tel">

        </span>
    </div>
    <script>
        // 입력직후에 바로 검사 실시 => onkeyup
        document.getElementById('tel').onkeyup = function(event) {
            // 정규식
            var regTel = /^[0-9]{3}-[0-9]{3,4}-[0-9]{4}$/;
            // [문자의종류]{문자의개수}
            if(regTel.test(this.value)) {
                // 2번형태 : 정규식(객체).test(문자열)
                document.getElementById('msg_tel').textContent = '통과';
            } else {
                document.getElementById('msg_tel').textContent = '실패';

            }
        }
    </script>

    <hr>

    <!-- 2. 아이디검사 -->
    <div>
        <input type="text" id="user_id">
        <span id="msg_id"></span>
    </div>
    <script>
        // & event 타입
        // focus   : 텍스트 창을 선택하면
        // blur    : 텍스트 창에서 벗어나면

        // 입력후 칸을 벗어날때 => onblur
        // => 입력할 때는 모르고 빠져나오면 알게됨
        document.getElementById('user_id').onblur = function(event) {
            // 5-20자, 소문자&숫자&-&_만 가능
            var regId= /^[0-9a-z-_]{5,20}$/;
            // 정규식은 괄호 안에 띄어쓰기하면 안됨
            if(regId.test(this.value)) {
                document.getElementById('msg_id').textContent = '멋진 아이디네요';
            } else {
                document.getElementById('msg_id').textContent = '5~20자의 영문 소문자, 숫자와 특수기호(- 또는 _) 만 사용 가능합니다';

            }
        }
    </script>

    <hr>

    <!-- 3. 비밀번호 검사 -->
    <div>
        <input type="password" id="user_pwd">
        <span id="msg_pwd"></span>
    </div>
    <script>
        document.getElementById('user_pwd').onblur = function(event) {
            // 8~16자 영문 대 소문자, 숫자, 특수문자(!@#$%^&*) 가능
            /* 
                (1) 대문자가 존재하는가? ?=.*[A-Z]
                (2) 소문자가 존재하는가? ?=.*[a-z]
                (3) 숫자 존재하는가?     ?=.*[0-9]
                (4) 특수문자 존재하는가? ?=.*[!@#$%^&*]
            */
             
            var regPwd = /^(?=.*[A-Z])(?=.*[a-z])(?=.*[0-9])(?=.*[!@#$%^&*])[A-Za-z0-9!@#$%^&*]{8,16}$/;
            if(regPwd.test(this.value)) {
                document.getElementById('msg_pwd').textContent = '사용가능한 비밀번호 입니다';
            } else {
                document.getElementById('msg_pwd').textContent = '사용불가능한 비밀번호 입니다';
            }
        }
         
    </script>

    <hr>

    <!-- 4. 이메일 검사 -->
    <div>
        <input type="text" id="email">
        
        <button id="btn">검사</button><br>
        <span id="msg_email"></span>
    </div>
    <script>
        var email = document.getElementById('email');
        var btn = document.getElementById('btn');
        var msgEmail = document.getElementById('msg_email');
        btn.onclick = function(event) {
            var regEmail = /^[0-9a-zA-Z-_]+@[0-9a-zA-Z]{2,}(\.[a-zA-Z]{2,6}){1,2}$/;
            // +                    : [0-9A-Za-z-_]인 글자가 한개 이상
            // (\.[a-zA-Z]){1,2}    : .co, .kr

            // () : 조건식
            if(regEmail.test(email.value)) {
                msgEmail.textContent = '올바른 이메일 형식입니다';
            } else {
                msgEmail.textContent = '잘못된 이메일 형식입니다';
            }
        }
    </script>
    
</body>
</html>